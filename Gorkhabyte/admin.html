<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Admin Panel — GorkhaByte</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="admin-app" id="app">
        <!-- Login Screen -->
        <div class="login-screen" id="loginScreen">
            <div class="card login-card">
                <h2>Admin Login</h2>
                <p class="muted">Sign in to manage blog posts</p>
                <form id="loginForm">
                    <label for="username">Username</label>
                    <input id="username" name="username" autocomplete="username" required />

                    <label for="password">Password</label>
                    <input id="password" name="password" type="password" autocomplete="current-password" required />

                    <div class="form-actions">
                        <button type="submit" class="btn primary">Sign in</button>
                    </div>
                    <div id="loginError" class="error" aria-live="polite" style="display:none;"></div>
                </form>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard" style="display:none;">
            <header class="dash-header">
                <div style="display:flex;flex-direction:column;gap:6px">
                    <h1>Admin Dashboard</h1>
                    <div style="display:flex;gap:8px;align-items:center;">
                        <input id="searchInput" placeholder="Search posts..." style="padding:8px;border-radius:8px;border:1px solid #e6e9ee;width:260px">
                        <select id="filterSelect" style="padding:8px;border-radius:8px;border:1px solid #e6e9ee">
                            <option value="all">All</option>
                            <option value="published">Published</option>
                            <option value="draft">Draft</option>
                        </select>
                        <button id="exportBtn" class="btn ghost">Export Posts</button>
                        <button id="importBtn" class="btn ghost">Import Posts</button>
                        <input id="importFile" type="file" accept="application/json" style="display:none">
                    </div>
                </div>
                <div class="dash-actions">
                    <button id="logoutBtn" class="btn ghost">Logout</button>
                </div>
            </header>

            <div class="dash-body">
                <aside class="sidebar">
                    <nav>
                        <ul>
                            <li><button id="newPostBtn" class="btn full">New Post</button></li>
                            <li><button id="showPostsBtn" class="btn full ghost">All Posts</button></li>
                            <li><button id="showMessagesBtn" class="btn full ghost">Messages</button></li>
                            <li><button id="showSubscribersBtn" class="btn full ghost">Subscribers</button></li>
                            <li><button id="showRegistrationsBtn" class="btn full ghost">Registrations</button></li>
                            <li><button id="showProjectsBtn" class="btn full ghost">Projects</button></li>
                        </ul>
                    </nav>
                </aside>

                <main class="main-panel">
                    <section class="post-editor card" id="editorSection">
                        <h2 id="editorTitle">Create Post</h2>
                        <form id="postForm">
                            <input type="hidden" id="postId">

                            <label for="postTitle">Title</label>
                            <input id="postTitle" required />

                            <label for="postExcerpt">Excerpt</label>
                            <input id="postExcerpt" maxlength="160" placeholder="Short summary (max 160 chars)" />

                            <label for="postContent">Content</label>
                            <textarea id="postContent" rows="8" required></textarea>

                            <label for="postImage">Media files (optional) — images, PDFs, or other files</label>
                            <input id="postImage" type="file" accept="image/*,application/pdf" multiple>
                            <div class="image-preview" id="imagePreview" style="display:none;">
                                <div id="previewList" style="display:flex;gap:8px;flex-wrap:wrap"></div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn primary">Save Post</button>
                                <button type="button" id="cancelEdit" class="btn ghost">Cancel</button>
                            </div>
                        </form>
                    </section>

                    <section class="posts-list card" id="postsSection">
                        <h2>All Posts</h2>
                        <div id="postsContainer" class="posts-container">
                            <!-- Posts listed here -->
                        </div>
                        <div id="noPosts" class="muted" style="display:none;">No posts yet. Create your first post.</div>
                    </section>

                    <!-- Messages -->
                    <section class="card" id="messagesSection" style="display:none;margin-top:18px;">
                        <h2>Contact Messages</h2>
                        <div style="display:flex;gap:8px;margin-bottom:8px;">
                            <button id="exportMessages" class="btn ghost">Export</button>
                            <button id="clearMessages" class="btn ghost">Clear All</button>
                        </div>
                        <div id="messagesContainer"></div>
                        <div id="noMessages" class="muted" style="display:none">No messages yet.</div>
                    </section>

                    <!-- Subscribers -->
                    <section class="card" id="subscribersSection" style="display:none;margin-top:18px;">
                        <h2>Subscribers</h2>
                        <div style="display:flex;gap:8px;margin-bottom:8px;">
                            <button id="exportSubscribers" class="btn ghost">Export</button>
                            <button id="clearSubscribers" class="btn ghost">Clear All</button>
                        </div>
                        <div id="subscribersContainer"></div>
                        <div id="noSubscribers" class="muted" style="display:none">No subscribers yet.</div>
                    </section>

                    <!-- Registrations -->
                    <section class="card" id="registrationsSection" style="display:none;margin-top:18px;">
                        <h2>Training Registrations</h2>
                        <div style="display:flex;gap:8px;margin-bottom:8px;">
                            <button id="exportRegistrations" class="btn ghost">Export</button>
                            <button id="clearRegistrations" class="btn ghost">Clear All</button>
                        </div>
                        <div id="registrationsContainer"></div>
                        <div id="noRegistrations" class="muted" style="display:none">No registrations yet.</div>
                    </section>

                    <!-- Projects Manager -->
                    <section class="card" id="projectsSection" style="display:none;margin-top:18px;">
                        <h2>Projects / Portfolio</h2>
                        <div style="display:flex;gap:8px;margin-bottom:8px;">
                            <button id="newProjectBtn" class="btn">New Project</button>
                            <button id="exportProjects" class="btn ghost">Export</button>
                        </div>

                        <section id="projectEditor" style="display:none;margin-top:12px;">
                            <h3 id="projectEditorTitle">Create Project</h3>
                            <form id="projectForm">
                                <input type="hidden" id="projectId">
                                <label for="projectTitle">Title</label>
                                <input id="projectTitle" required>
                                <label for="projectDescription">Description</label>
                                <textarea id="projectDescription" rows="4"></textarea>
                                <label for="projectImage">Image</label>
                                <input id="projectImage" type="file" accept="image/*">
                                <div style="margin-top:8px;" class="form-actions">
                                    <button type="submit" class="btn primary">Save Project</button>
                                    <button type="button" id="cancelProject" class="btn ghost">Cancel</button>
                                </div>
                            </form>
                        </section>

                        <div id="projectsContainer" style="margin-top:12px;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px"></div>
                        <div id="noProjects" class="muted" style="display:none">No projects added yet.</div>
                    </section>
                </main>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>
